authenticate:
  build: .
  ports:
   # HOST:CONTAINER

   # Flask defaults to listening on port 5000 but this is configurable.
   # See http://flask.pocoo.org/docs/0.10/api/#flask.Flask.run
   - "5000:5000"
  volumes:
   - /tmp/authentication:/data
  environment:
   - SQLALCHEMY_DATABASE_URI=sqlite:////data/authentication.db
   - SECRET
  command: python authentication/authentication.py
  links:
    - storage
storage:
  build: .
  ports:
   # HOST:CONTAINER

   # Flask defaults to listening on port 5000 but this is configurable.
   # See http://flask.pocoo.org/docs/0.10/api/#flask.Flask.run
   # TODO Use an environment variable for the port to run on, so ``authenticate`` can see it
   - "5001:5001"
  container_name: authentication_storage
  volumes:
   - /tmp/authentication:/data
  environment:
   - SQLALCHEMY_DATABASE_URI=sqlite:////data/authentication.db
  command: python storage/storage.py
